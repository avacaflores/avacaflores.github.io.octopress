
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Hacking Octopress - Por puro gusto</title>
	<meta name="author" content="Alfonso Vacaflores">

	
	<meta name="description" content="Hacking Octopress Octopress es un framework para páginas estáticas basado en Jekyll, sin lugar a duda es una excelente y divertida manera de &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Por puro gusto" type="application/atom+xml">
	
	<link rel="canonical" href="http://avacaflores.github.io/blog/2014/05/16/hacking-octopress/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-50859718-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("avacaflores@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
	
</div>
<hgroup>
  <h1><a href="/">Por puro gusto</a></h1>

<section class="site-description">
  <p>
    Tecnología, programación y un poco de electrónica
  </p>
</section>

</hgroup>
<nav id="main-nav"><ul class="main">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archivo</a></li>
  <li><a href="/projects">Proyectos</a></li>
  <li><a href="/resources">Recursos</a></li>
  <li><a href="/about">Acerca de...</a></li>
</ul>
</nav>
<nav id="sub-nav">
	<div class="social">
		
			<a class="email" href="mailto:avacaflores@gmail.com" title="Email">Email</a>
		
		
		
			<a class="google" href="https://plus.google.com/+AlfonsoVacaflores" rel="author" title="Google+">Google+</a>
		
		
			<a class="twitter" href="http://twitter.com/avacaflores" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/avacaflores" title="GitHub">GitHub</a>
		
		
		
		
			<a class="linkedin" href="http://www.linkedin.com/in/avacaflores" title="LinkedIn">LinkedIn</a>
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Hacking Octopress</h1>
	<div class="entry-content" itemprop="articleBody"><p>Octopress es un framework para páginas estáticas basado en Jekyll, sin lugar a duda es una excelente y divertida manera de publicar un blog o página personal. Como su eslogan lo dice &ldquo;A blogging framework for hackers&rdquo; necesita de ciertos conocimiento básicos de Ruby y su servidor Rack. Pero por sobre todas las cosas necesita que perdamos el miedo a la línea de comandos ya que todo el trabajo se debe hacer desde un editor de textos normal y comandos en la consola.</p>

<p>Octopress ofrece un template básico muy bien logrado que representa un gran avance sobre Jekyll, adicionalmente existen muchos templates de terceros que son muy fáciles de utilizar, sin embargo,  por el momento he decidido mantenerme con el template estándar y sólo hacer algunos ajustes básicos. De todos estos ajustes considero que vale la pena comentar sobre los siguientes:</p>

<h2>Cambio de color de background de los bloques de código</h2>

<p>Por defecto Octopress utiliza Solarized el cual tiene 2 templates &ldquo;dark&rdquo; y &ldquo;light&rdquo;, el primero es muy oscuro y el segundo es un color entre amarillo que personalmente no es de mi agrado. Para cambiar este color simplemente hay editar el archivo <code>/sass/custom/_colors.scss</code> y quitar el comentario a <code>$solarized</code> y a las variables <code>$base2</code> y <code>base3</code>, a las cuales podemos cambiar los valores deseados</p>

<figure class='code'><figcaption><span>/sass/custom/_colors.scss </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="nv">$solarized</span><span class="o">:</span> <span class="n">light</span><span class="p">;</span>
</span><span class='line'><span class="nv">$base2</span><span class="o">:</span>             <span class="mh">#dddddd</span><span class="p">;</span>
</span><span class='line'><span class="nv">$base3</span><span class="o">:</span>             <span class="mh">#f0f0f0</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>El folder <code>/sass/custom</code> contiene muchas sugerencias para el cambio de estilo en Octopress, tomen su tiempo y vaya experimentando. Tengan en cuenta que todo cambio  con CSS debe ser hecho en el archivo <code>sass/custom/_styles.scss</code> que es el último en cargarse.</p>

<h2>Traducción al español</h2>

<p>Octopress no cuenta con soporte para <a href="http://es.wikipedia.org/wiki/I18n">i18n</a> por lo que hay que hacer un trabajo manual de reemplazo de todas las etiquetas, los principales archivos a traducir se encuentran en los folders:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/source/custom
</span><span class='line'>/source/post
</span><span class='line'>/source/_layout</span></code></pre></td></tr></table></div></figure>


<p>En cuanto a la traducción, el cambio mas complicado es el de las fechas, para lo cual use como modelo el siguiente código que encontré en <a href="https://github.com/vigo/octopress">github</a></p>

<p>Para realizar el cambio inicialmente debemos crear los arrays con los valores de los días y meses en español, esto los debemos adicionar el archivo <code>/plugins/date.rb</code></p>

<figure class='code'><figcaption><span>/plugins/date.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='rb'><span class='line'><span class="k">module</span> <span class="nn">Octopress</span>
</span><span class='line'>  <span class="k">module</span> <span class="nn">Date</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Days and Months in spanish</span>
</span><span class='line'>    <span class="no">MONTHNAMES_ES</span> <span class="o">=</span> <span class="o">[</span><span class="kp">nil</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;Enero&quot;</span><span class="p">,</span> <span class="s2">&quot;Febrero&quot;</span><span class="p">,</span> <span class="s2">&quot;Marzo&quot;</span><span class="p">,</span> <span class="s2">&quot;Abril&quot;</span><span class="p">,</span> <span class="s2">&quot;Mayo&quot;</span><span class="p">,</span> <span class="s2">&quot;Junio&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;Julio&quot;</span><span class="p">,</span> <span class="s2">&quot;Agosto&quot;</span><span class="p">,</span> <span class="s2">&quot;Septiembre&quot;</span><span class="p">,</span> <span class="s2">&quot;Octubre&quot;</span><span class="p">,</span> <span class="s2">&quot;Noviembre&quot;</span><span class="p">,</span> <span class="s2">&quot;Diciembre&quot;</span><span class="o">]</span>
</span><span class='line'>    <span class="no">ABBR_MONTHNAMES_ES</span> <span class="o">=</span> <span class="o">[</span><span class="kp">nil</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;Ene&quot;</span><span class="p">,</span> <span class="s2">&quot;Feb&quot;</span><span class="p">,</span> <span class="s2">&quot;Mar&quot;</span><span class="p">,</span> <span class="s2">&quot;Abr&quot;</span><span class="p">,</span> <span class="s2">&quot;May&quot;</span><span class="p">,</span> <span class="s2">&quot;Jun&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;Jul&quot;</span><span class="p">,</span> <span class="s2">&quot;Ago&quot;</span><span class="p">,</span> <span class="s2">&quot;Sep&quot;</span><span class="p">,</span> <span class="s2">&quot;Oct&quot;</span><span class="p">,</span> <span class="s2">&quot;Nov&quot;</span><span class="p">,</span> <span class="s2">&quot;Dic&quot;</span><span class="o">]</span>
</span><span class='line'>    <span class="no">DAYNAMES_ES</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;Domingo&quot;</span><span class="p">,</span> <span class="s2">&quot;Lunes&quot;</span><span class="p">,</span> <span class="s2">&quot;Martes&quot;</span><span class="p">,</span> <span class="s2">&quot;Mi&amp;eacute;rcoles&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;Jueves&quot;</span><span class="p">,</span> <span class="s2">&quot;Viernes&quot;</span><span class="p">,</span> <span class="s2">&quot;S&amp;aacute;bado&quot;</span><span class="o">]</span>
</span><span class='line'>    <span class="no">ABBR_DAYNAMES_ES</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;Dom&quot;</span><span class="p">,</span> <span class="s2">&quot;Lun&quot;</span><span class="p">,</span> <span class="s2">&quot;Mar&quot;</span><span class="p">,</span> <span class="s2">&quot;Mi&amp;eacute;&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="s2">&quot;Jue&quot;</span><span class="p">,</span> <span class="s2">&quot;Vie&quot;</span><span class="p">,</span> <span class="s2">&quot;S&amp;aacute;b&quot;</span><span class="o">]</span>
</span><span class='line'><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>En el mismo archivo localizar la función <code>format_date</code></p>

<figure class='code'><figcaption><span>/plugins/date.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='rb'><span class='line'><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">format_date</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span>
</span><span class='line'>      <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</span><span class='line'>      <span class="k">if</span> <span class="nb">format</span><span class="o">.</span><span class="n">nil?</span> <span class="o">||</span> <span class="nb">format</span><span class="o">.</span><span class="n">empty?</span> <span class="o">||</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;ordinal&quot;</span>
</span><span class='line'>        <span class="n">date_formatted</span> <span class="o">=</span> <span class="n">ordinalize</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>        <span class="n">date_formatted</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>
</span><span class='line'>        <span class="n">date_formatted</span><span class="o">.</span><span class="n">gsub!</span><span class="p">(</span><span class="sr">/%o/</span><span class="p">,</span> <span class="n">ordinal</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%e&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_i</span><span class="p">))</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="n">date_formatted</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Y reemplazarla por la siguiente función:</p>

<figure class='code'><figcaption><span>/plugins/date.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='rb'><span class='line'><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">format_date</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span>
</span><span class='line'>      <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</span><span class='line'>      <span class="k">if</span> <span class="nb">format</span><span class="o">.</span><span class="n">nil?</span> <span class="o">||</span> <span class="nb">format</span><span class="o">.</span><span class="n">empty?</span> <span class="o">||</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;ordinal&quot;</span>
</span><span class='line'>        <span class="n">date_formatted</span> <span class="o">=</span> <span class="n">ordinalize</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>        <span class="n">date_formatted</span> <span class="o">=</span> <span class="nb">format</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/%a/</span><span class="p">,</span> <span class="no">ABBR_DAYNAMES_ES</span><span class="o">[</span><span class="n">date</span><span class="o">.</span><span class="n">wday</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>        <span class="n">date_formatted</span> <span class="o">=</span> <span class="n">date_formatted</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/%A/</span><span class="p">,</span> <span class="no">DAYNAMES_ES</span><span class="o">[</span><span class="n">date</span><span class="o">.</span><span class="n">wday</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>        <span class="n">date_formatted</span> <span class="o">=</span> <span class="n">date_formatted</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/%b/</span><span class="p">,</span> <span class="no">ABBR_MONTHNAMES_ES</span><span class="o">[</span><span class="n">date</span><span class="o">.</span><span class="n">mon</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>        <span class="n">date_formatted</span> <span class="o">=</span> <span class="n">date_formatted</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/%B/</span><span class="p">,</span> <span class="no">MONTHNAMES_ES</span><span class="o">[</span><span class="n">date</span><span class="o">.</span><span class="n">mon</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>        <span class="n">date_formatted</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">date_formatted</span><span class="p">)</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="n">date_formatted</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Después de este procedimiento todas las fechas de los posts estarán disponibles en español. Así mismo es posible cambiar el formato de presentación en el archivo <code>/_config.yml</code> por ejemplo utilizando la siguiente plantilla:</p>

<figure class='code'><figcaption><span>&#8216;/_config.yml&#8217; </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">date_format</span><span class="p-Indicator">:</span> <span class="s">&quot;%d</span><span class="nv"> </span><span class="s">%B</span><span class="nv"> </span><span class="s">%Y&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Esta implementación tiene una falencia que se hace evidente en el la página del Archivo de posts, por el momento mi solución es la presentar el mes en formato numérico cambiando las siguientes líneas en el archivo <code>/source/post/archive_post.html</code></p>

<figure class='code'><figcaption><span>/source/post/archive_post.html </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>...
</span><span class='line'><span class="nt">&lt;time</span> <span class="na">datetime=</span><span class="s">&quot;{{ post.date | datetime | date_to_xmlschema }}&quot;</span> <span class="na">pubdate</span><span class="nt">&gt;</span>{{ post.date | date: &quot;<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&#39;month&#39;</span><span class="nt">&gt;</span>%m<span class="nt">&lt;/span&gt;</span>/<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&#39;day&#39;</span><span class="nt">&gt;</span>%d<span class="nt">&lt;/span&gt;</span> <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&#39;year&#39;</span><span class="nt">&gt;</span>%Y<span class="nt">&lt;/span&gt;</span>&quot;}}<span class="nt">&lt;/time&gt;</span>
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>Y estos son los resultados de estas modificaciones:</p>

<p><img src="/images/blog/blog.png" width="700"></p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2014

    Alfonso Vacaflores

<span class="credit"> - Powered by <a href="http://octopress.org" class="link">Octopress</a></span>
</footer>
		</div>
	</div>
	

<script type="text/javascript">
      var disqus_shortname = 'porpurogusto';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://avacaflores.github.io/blog/2014/05/16/hacking-octopress/';
        var disqus_url = 'http://avacaflores.github.io/blog/2014/05/16/hacking-octopress/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
